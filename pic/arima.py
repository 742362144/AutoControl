
import matplotlib.pyplot as plt
import numpy as np

plt.style.use(['science', 'high-contrast', 'no-latex'])

plt.rcParams['font.sans-serif'] = ['SimHei']  # 设置字体以便支持中文

# x = [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608, 16777216]
# y = [754326, 816252, 702338, 713058, 707751, 681619, 700898, 690466, 702017, 825832, 822247, 874179, 727937, 752400,
#      760544, 816799, 927918, 1013490, 1169714, 1732919, 2893101, 6046031, 8467145, 12473026, 19080712]

x_label1 = ['1b', '2b', '4b', '8b', '16b', '32b', '64b', '128b', '256b', '512b', '1kb', '2kb', '4kb', '8kb', '16kb',
            '32kb', '64kb', '128kb', '256kb', '512kb', '1mb', '2mb', '4mb', '8mb', '16mb']
u = [81.94125535570471, 94.60042613861387, 84.16980556016597, 69.46948359265443, 60.92226206579954, 62.38308493261455, 61.53812250855188, 61.108363255813956, 68.07550484671533, 84.46271771105616, 69.15808863157895, 60.36006134490239, 60.600957027863785, 60.18467341387642, 59.62160938443671, 62.14814027544507, 84.35663863065805, 91.50474892448511, 67.74109526184539, 67.05577096402878, 60.971599970544915, 61.87930751519485, 61.69225708661418, 59.70564230184583, 60.123346608695655, 67.29658843322818, 58.74349132555674, 59.447174617801046, 59.742596034618416, 59.602808906882586, 59.98265141552511, 60.87292055260362, 61.68847516888434, 61.817947011800534, 56.94283386503068, 59.190757731958755, 58.39667352625938, 59.62265337260678, 59.1366378270193, 58.44051026567482, 61.6753142776404, 60.30743211678832, 60.3207775321726, 59.691639975, 59.43164413884298, 59.5899287119438, 59.25909678800856, 60.38493618843683, 59.641764881995954, 59.674387905169056, 60.290396470588234, 58.45921523686754, 58.659044278568686, 59.55488612637362, 61.075022059313554, 59.409862819383264, 58.447843849259755, 59.25596613710556, 61.13940133384438, 59.07237709689214, 60.15887695881732, 60.33572822025565, 59.97098683175527, 59.94617506849315, 62.78733498964803, 59.07676961662486, 59.25673480677966, 59.92861059923796, 59.48144717948718, 59.60852994219654, 59.51175568911917, 59.27243904069768, 59.65154003629763, 58.39141196996782, 58.198095140381284, 58.995975397316826, 60.044930302824085, 59.42150865800866, 59.72780571428571, 60.28258473745624, 60.120715890710386, 60.528787734290844, 59.63016522599802, 59.96459911798839, 60.94165751633987]
p = [78.31008457852579, 91.1761518418894, 80.87624781599939, 66.3919672453972, 58.115051263663766, 59.63979415040081, 58.90566283683071, 58.57041005423484, 65.47808374081784, 81.72957223159284, 66.61091365972906, 58.03531890514177, 58.33293978777222, 57.98551626477288, 57.48772629860194, 60.01593273959069, 81.91397219119696, 89.11552836533271, 65.50660570134086, 64.8876296075271, 58.95739167997546, 59.88963273563129, 59.747545360627, 57.83694244824389, 58.28257249134761, 65.36459354267666, 56.98254642326538, 57.70454825065388, 58.02547761316697, 57.91809029723088, 58.32020682769999, 59.2237867771023, 60.05429246500013, 60.209421169431735, 55.43741937925532, 57.669336788991394, 56.911802975321656, 58.13992661635359, 57.68419370855807, 57.019958335964496, 60.225653562994935, 58.899375393642764, 58.932845347391236, 58.33210948548027, 58.09452447203514, 58.26875862004551, 57.96008962515058, 59.08796461157535, 58.37144675874381, 58.42015119087985, 59.04432139458878, 57.25052734760262, 57.463873801561036, 58.3628025618255, 59.87892088733062, 58.246538006446485, 57.3114603189384, 58.12276254370854, 59.99699707743278, 57.96752999422012, 59.053136719809565, 59.2404895427895, 58.892018740013604, 58.879355181835166, 61.70158890778409, 58.04108146165055, 58.22992000985203, 58.9052957980505, 58.47345648497332, 58.60950682532605, 58.523861377382985, 58.29688821634948, 58.6817649229678, 57.44214401606079, 57.261513841558674, 58.06008649714223, 59.10757227163458, 58.49908145072766, 58.810992718449604, 59.369120848524254, 59.21721561071229, 59.63010885541657, 58.747611804858906, 59.087177036003936, 60.063398388886895]

x1 = np.array(u)
y1 = np.array(p)
# plt.plot(range(1, len(x)+1), y, label="net")
#
# plt.xticks(range(1, len(x)+1), x_label, rotation='vertical')
#
# plt.legend(loc='best', fontsize=10)
# # 防止坐标轴重叠
# # plt.tight_layout()
# plt.show()


# tick_label = ['compute', 'storage']

plt.subplots(figsize=(8, 3), dpi=400)
plt.subplot(121)

x_label2 = ['128b', '256b', '512b', '1kb', '2kb', '4kb', '8kb', '16kb', '32kb', '64kb', '128kb']
x2 = [22.5, 22.5, 22.0, 22.5, 21.5, 22.5, 24.0, 24.5, 25.5, 29.5, 32.0, 36.0, 43.0, 49.0, 53.0, 55.5, 55.0, 54.0, 53.5, 54.5, 51.5, 46.0, 45.5, 49.5, 53.5, 55.0, 54.0, 52.5, 50.0, 47.0, 45.5, 45.5, 44.5, 43.0, 43.0, 46.0, 48.5, 50.0, 51.0, 55.0, 59.5, 63.5, 65.0, 65.5, 66.0, 66.0, 67.0, 67.5, 66.0, 66.0, 67.0, 67.0, 64.5, 62.5, 58.0, 51.0, 45.5, 40.5, 36.0, 32.0, 31.0, 29.5, 29.5, 27.5, 24.0, 22.0, 22.0, 23.5, 24.5, 24.0, 22.5, 23.0, 24.5, 25.5, 25.5, 27.0, 30.5, 35.0, 40.5, 47.5, 52.5, 54.5, 58.0, 62.5, 65.5, 67.5, 68.5, 71.0, 76.5, 82.0, 84.0, 85.0, 87.5, 91.0, 94.0, 93.0, 91.0, 90.0]
y2 = [20.520859609239835, 23.898162902842014, 21.996090467678663, 21.89017366022901, 23.343214645940893, 20.09519275881597, 24.612256378126194, 24.831042083934683, 24.84752297653492, 26.684741390114482, 33.73246394205141, 32.87351002246954, 40.39932358923156, 49.02192109812976, 53.000869055293045, 55.744348748861135, 57.162958171658126, 53.7435988263541, 53.70693458201249, 53.27718291154382, 55.98613867956959, 47.426244280317114, 41.961692469408405, 47.25878092901943, 53.42618531907973, 56.281627883262416, 55.47941601297854, 52.78841936906292, 51.60069358817969, 47.77068577447516, 44.89320456951705, 45.07326795516571, 45.92938674173724, 43.313204752780074, 42.08754184182741, 43.68706636603463, 49.331552824199974, 49.85027432922215, 51.23699686102745, 51.71404612529505, 59.4821701651332, 62.568564574797605, 66.73718220283202, 65.23774773787777, 66.16226541578548, 66.43589341421894, 65.97409978982316, 68.38225948119204, 67.55451788749428, 64.43077652322408, 67.03548038777997, 67.81919795205978, 66.77133856046711, 61.916659271468006, 61.74477858437951, 53.3661422010605, 45.51143216119368, 42.20758331900883, 36.62615430841634, 33.01706455065956, 29.126903836962416, 31.56050113639479, 27.660601035333045, 30.678803956484987, 24.75188109575415, 21.587131451087032, 21.153177552917377, 22.65166055156191, 25.104692165283403, 25.018980197186515, 23.348725097368614, 21.304034086938003, 24.419347658357065, 25.698020001791235, 26.23471887754071, 25.31615750676776, 29.047928899136075, 33.69324892922577, 38.75175105644316, 45.120396216395385, 53.406390601736, 55.39839916641443, 55.500518663476164, 61.74948671861268, 65.95667069044394, 67.36753126290685, 69.04505955730824, 69.0512024784911, 73.822916803049, 81.61080876309448, 85.900582651398, 84.46944301904448, 86.12181717514834, 90.02020848131691, 93.94387113313623, 96.13840470945891, 90.91007597831785, 89.98477296564164]
x2 = np.array(x2)
y2 = np.array(y2)
plt.plot(range(1, len(x2) + 1), x2, label="usage")
plt.plot(range(1, len(x2) + 1), y2, label="model predict")

text_font = {'size': '10', 'weight': 'bold', 'color': 'black'}
plt.text(2, -200000, "Serialization cost model", fontdict=text_font, zorder=4)

plt.legend(loc='best', fontsize=8)

plt.subplot(122)

plt.plot(range(1, len(x1) + 1), x1, label="usage")
plt.plot(range(1, len(x1) + 1), y1, label="model predict")

# plt.xticks(range(1, len(x1) + 1), x_label1, rotation='vertical')

text_font = {'size': '9', 'weight': 'bold', 'color': 'black'}
plt.text(15, 45, "ARIMA predict result", fontdict=text_font, zorder=4)

plt.legend(loc='best', fontsize=8)  # 显示图例，即label

# plt.xticks(x, tick_label)  # 显示x坐标轴的标签,即tick_label,调整位置，使其落在两个直方图中间位置


# plt.xticks(x, tick_label)

# 防止坐标轴重叠
plt.tight_layout()
plt.show()
