
import matplotlib.pyplot as plt
import numpy as np

plt.style.use(['science', 'high-contrast', 'no-latex'])

plt.rcParams['font.sans-serif'] = ['SimHei']  # 设置字体以便支持中文

# x = [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608, 16777216]
# y = [754326, 816252, 702338, 713058, 707751, 681619, 700898, 690466, 702017, 825832, 822247, 874179, 727937, 752400,
#      760544, 816799, 927918, 1013490, 1169714, 1732919, 2893101, 6046031, 8467145, 12473026, 19080712]

x_label1 = ['1b', '2b', '4b', '8b', '16b', '32b', '64b', '128b', '256b', '512b', '1kb', '2kb', '4kb', '8kb', '16kb',
            '32kb', '64kb', '128kb', '256kb', '512kb', '1mb', '2mb', '4mb', '8mb', '16mb']
u = [81.94125535570471, 94.60042613861387, 84.16980556016597, 69.46948359265443, 60.92226206579954, 62.38308493261455, 61.53812250855188, 61.108363255813956, 68.07550484671533, 84.46271771105616, 69.15808863157895, 60.36006134490239, 60.600957027863785, 60.18467341387642, 59.62160938443671, 62.14814027544507, 84.35663863065805, 91.50474892448511, 67.74109526184539, 67.05577096402878, 60.971599970544915, 61.87930751519485, 61.69225708661418, 59.70564230184583, 60.123346608695655, 67.29658843322818, 58.74349132555674, 59.447174617801046, 59.742596034618416, 59.602808906882586, 59.98265141552511, 60.87292055260362, 61.68847516888434, 61.817947011800534, 56.94283386503068, 59.190757731958755, 58.39667352625938, 59.62265337260678, 59.1366378270193, 58.44051026567482, 61.6753142776404, 60.30743211678832, 60.3207775321726, 59.691639975, 59.43164413884298, 59.5899287119438, 59.25909678800856, 60.38493618843683, 59.641764881995954, 59.674387905169056, 60.290396470588234, 58.45921523686754, 58.659044278568686, 59.55488612637362, 61.075022059313554, 59.409862819383264, 58.447843849259755, 59.25596613710556, 61.13940133384438, 59.07237709689214, 60.15887695881732, 60.33572822025565, 59.97098683175527, 59.94617506849315, 62.78733498964803, 59.07676961662486, 59.25673480677966, 59.92861059923796, 59.48144717948718, 59.60852994219654, 59.51175568911917, 59.27243904069768, 59.65154003629763, 58.39141196996782, 58.198095140381284, 58.995975397316826, 60.044930302824085, 59.42150865800866, 59.72780571428571, 60.28258473745624, 60.120715890710386, 60.528787734290844, 59.63016522599802, 59.96459911798839, 60.94165751633987]
p = [78.31008457852579, 91.1761518418894, 80.87624781599939, 66.3919672453972, 58.115051263663766, 59.63979415040081, 58.90566283683071, 58.57041005423484, 65.47808374081784, 81.72957223159284, 66.61091365972906, 58.03531890514177, 58.33293978777222, 57.98551626477288, 57.48772629860194, 60.01593273959069, 81.91397219119696, 89.11552836533271, 65.50660570134086, 64.8876296075271, 58.95739167997546, 59.88963273563129, 59.747545360627, 57.83694244824389, 58.28257249134761, 65.36459354267666, 56.98254642326538, 57.70454825065388, 58.02547761316697, 57.91809029723088, 58.32020682769999, 59.2237867771023, 60.05429246500013, 60.209421169431735, 55.43741937925532, 57.669336788991394, 56.911802975321656, 58.13992661635359, 57.68419370855807, 57.019958335964496, 60.225653562994935, 58.899375393642764, 58.932845347391236, 58.33210948548027, 58.09452447203514, 58.26875862004551, 57.96008962515058, 59.08796461157535, 58.37144675874381, 58.42015119087985, 59.04432139458878, 57.25052734760262, 57.463873801561036, 58.3628025618255, 59.87892088733062, 58.246538006446485, 57.3114603189384, 58.12276254370854, 59.99699707743278, 57.96752999422012, 59.053136719809565, 59.2404895427895, 58.892018740013604, 58.879355181835166, 61.70158890778409, 58.04108146165055, 58.22992000985203, 58.9052957980505, 58.47345648497332, 58.60950682532605, 58.523861377382985, 58.29688821634948, 58.6817649229678, 57.44214401606079, 57.261513841558674, 58.06008649714223, 59.10757227163458, 58.49908145072766, 58.810992718449604, 59.369120848524254, 59.21721561071229, 59.63010885541657, 58.747611804858906, 59.087177036003936, 60.063398388886895]

x1 = np.array(u)
y1 = np.array(p)
# plt.plot(range(1, len(x)+1), y, label="net")
#
# plt.xticks(range(1, len(x)+1), x_label, rotation='vertical')
#
# plt.legend(loc='best', fontsize=10)
# # 防止坐标轴重叠
# # plt.tight_layout()
# plt.show()


# tick_label = ['compute', 'storage']

plt.subplots(figsize=(5, 3), dpi=300)
plt.subplot(121)

plt.plot(range(1, len(x1) + 1), x1, label="usage")
plt.plot(range(1, len(x1) + 1), y1, label="predict")

# plt.xticks(range(1, len(x1) + 1), x_label1, rotation='vertical')

text_font = {'size': '9', 'weight': 'bold', 'color': 'black'}
plt.text(15, 45, "ARIMA predict result", fontdict=text_font, zorder=4)

plt.legend(loc='best', fontsize=8)  # 显示图例，即label

# plt.xticks(x, tick_label)  # 显示x坐标轴的标签,即tick_label,调整位置，使其落在两个直方图中间位置

plt.subplot(122)

x_label2 = ['128b', '256b', '512b', '1kb', '2kb', '4kb', '8kb', '16kb', '32kb', '64kb', '128kb']
x2 = [128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072]
y2 = [2447, 3013, 4330, 6033, 8632, 14891, 22768, 53646, 93485, 213157, 431445]
x2 = np.array(x2)
y2 = np.array(y2)
plt.plot(range(1, len(x2) + 1), y2, label="protobuf")

x3 = ['128b', '256b', '512b', '1kb', '2kb', '4kb', '8kb', '16kb', '32kb', '64kb', '128kb']
y3 = [109, 109, 186, 187, 235, 278, 372, 589, 1085, 2104, 4107]
x3 = np.array(x3)
y3 = np.array(y3)
plt.plot(range(1, len(x3) + 1), y3, label="redis")

plt.xticks(range(1, len(x2) + 1), x_label2, rotation='vertical')

text_font = {'size': '10', 'weight': 'bold', 'color': 'black'}
plt.text(2, -200000, "Serialization cost model", fontdict=text_font, zorder=4)

plt.legend(loc='best', fontsize=8)
# plt.xticks(x, tick_label)

# 防止坐标轴重叠
plt.tight_layout()
plt.show()
